syntax = "proto3";
package payment;
option go_package = "./pkg/paymentpb";

service PaymentService {
  // Для страницы "Тарифы"
  rpc GetPlans (GetPlansRequest) returns (GetPlansResponse);
  
  // Для страницы "Активация промокода"
  rpc RedeemPromo (RedeemPromoRequest) returns (RedeemPromoResponse);

  rpc SpinWheel(SpinWheelRequest) returns (SpinWheelResponse);
}

message Plan {
  string id = 1;
  string name = 2;        // "Базовый", "PRO"
  int32 price = 3;
  string description = 4;
}

message GetPlansRequest {}
message GetPlansResponse {
  repeated Plan plans = 1;
}

message RedeemPromoRequest {
  string user_id = 1;
  string code = 2; // Например "FREE3DAY"
}

message RedeemPromoResponse {
  bool success = 1;
  string message = 2;    // "Подписка Базовый активирована"
  string plan_name = 3;
  int64 expires_at = 4;
}

message SpinWheelRequest {
  string user_id = 1;
}

message SpinWheelResponse {
  string prize_type = 1; // "BALANCE", "SLOT", "AVATAR", "EMPTY"
  int32 prize_value = 2; // Например: 50 (снежинок) или 1 (слот) или ID аватарки
  string message = 3;    // Текст выигрыша для фронта
  int32 remaining_balance = 4;
}